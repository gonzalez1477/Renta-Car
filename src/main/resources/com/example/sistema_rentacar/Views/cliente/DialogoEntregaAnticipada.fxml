<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<VBox prefHeight="650" prefWidth="520" maxHeight="750" maxWidth="600" spacing="0" styleClass="entrega-dialog-container" stylesheets="@../../css/estilosDialogoEntregaAnticipada.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.sistema_rentacar.Controllers.Cliente.DialogoEntregaAnticipadaController">

    <!-- Header del diÃ¡logo - Compacto -->
    <HBox alignment="CENTER_LEFT" spacing="12" styleClass="entrega-header" style="-fx-padding: 15;">
        <Label styleClass="entrega-icon" style="-fx-font-size: 22px;" text="ðŸš—" />
        <VBox spacing="2">
            <Label styleClass="entrega-title" style="-fx-font-size: 18px;" text="Entrega Anticipada" />
            <Label styleClass="entrega-subtitle" style="-fx-font-size: 11px;" text="DevoluciÃ³n antes de la fecha acordada" />
        </VBox>
    </HBox>

    <!-- ScrollPane para el contenido -->
    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="entrega-scroll-pane" style="-fx-background-color: transparent; -fx-background: white;" VBox.vgrow="ALWAYS">
        <VBox spacing="15" style="-fx-padding: 18;">

            <!-- InformaciÃ³n del Alquiler -->
            <VBox spacing="12" styleClass="info-alquiler-box" style="-fx-padding: 12; -fx-background-radius: 5;">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label styleClass="icon-decoration" style="-fx-font-size: 14px;" text="ðŸ“‹" />
                    <Label styleClass="info-section-title" style="-fx-font-size: 13px; -fx-font-weight: bold;" text="InformaciÃ³n del Alquiler" />
                </HBox>

                <GridPane hgap="10" vgap="8">
                    <Label styleClass="info-label" style="-fx-font-size: 11px; -fx-font-weight: bold;" text="VehÃ­culo:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <Label fx:id="lblVehiculo" styleClass="info-value" style="-fx-font-size: 11px;" text="-" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                    <Label styleClass="info-label" style="-fx-font-size: 11px; -fx-font-weight: bold;" text="Fecha Inicio:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Label fx:id="lblFechaInicio" styleClass="info-value" style="-fx-font-size: 11px;" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <Label styleClass="info-label" style="-fx-font-size: 11px; -fx-font-weight: bold;" text="Fecha Fin:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                    <Label fx:id="lblFechaFin" styleClass="info-value" style="-fx-font-size: 11px;" text="-" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                    <Label styleClass="info-label" style="-fx-font-size: 11px; -fx-font-weight: bold;" text="DÃ­as Contratados:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                    <Label fx:id="lblDiasContratados" styleClass="info-value" style="-fx-font-size: 11px;" text="-" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                    <Label styleClass="info-label" style="-fx-font-size: 11px; -fx-font-weight: bold;" text="DÃ­as Utilizados:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                    <Label fx:id="lblDiasUtilizados" styleClass="info-value-highlight" style="-fx-font-size: 11px; -fx-text-fill: #27ae60; -fx-font-weight: bold;" text="-" GridPane.columnIndex="1" GridPane.rowIndex="4" />

                    <columnConstraints>
                        <ColumnConstraints percentWidth="42" />
                        <ColumnConstraints percentWidth="58" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>
            </VBox>

            <!-- CÃ¡lculo Financiero -->
            <VBox spacing="10" styleClass="reembolso-box" style="-fx-padding: 12; -fx-background-radius: 5; -fx-background-color: #e8f5e9;">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label styleClass="icon-decoration" style="-fx-font-size: 14px;" text="ðŸ’°" />
                    <Label styleClass="reembolso-title" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #155724;" text="CÃ¡lculo de Reembolso" />
                </HBox>

                <Separator style="-fx-background-color: rgba(40, 167, 69, 0.3); -fx-padding: 2 0;" />

                <!-- Grid compacto para montos -->
                <GridPane hgap="10" vgap="8">
                    <Label styleClass="reembolso-label" style="-fx-font-size: 11px;" text="Tarifa diaria:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <Label fx:id="lblTarifaDiaria" styleClass="reembolso-monto" style="-fx-font-size: 11px; -fx-font-weight: bold;" text="\$0.00" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                    <Label styleClass="reembolso-label" style="-fx-font-size: 11px;" text="Monto pagado:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Label fx:id="lblDepositoPagado" styleClass="reembolso-monto" style="-fx-font-size: 11px; -fx-text-fill: #3498db; -fx-font-weight: bold;" text="\$0.00" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <columnConstraints>
                        <ColumnConstraints percentWidth="50" />
                        <ColumnConstraints halignment="RIGHT" percentWidth="50" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>

                <Separator style="-fx-background-color: rgba(52, 152, 219, 0.2); -fx-padding: 2 0;" />

                <!-- DÃ­as no utilizados y reembolso -->
                <GridPane hgap="10" vgap="8">
                    <Label styleClass="reembolso-label" style="-fx-font-size: 11px;" text="DÃ­as no utilizados:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <HBox alignment="CENTER_RIGHT" spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <Label fx:id="lblDiasNoUtilizados" styleClass="reembolso-dias" style="-fx-font-size: 11px; -fx-font-weight: bold; -fx-text-fill: #155724;" text="0" />
                        <Label style="-fx-font-size: 11px; -fx-text-fill: #155724;" text="dÃ­as" />
                    </HBox>

                    <Label styleClass="reembolso-label" style="-fx-font-size: 12px; -fx-font-weight: bold;" text="Reembolso:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Label fx:id="lblMontoReembolso" styleClass="reembolso-monto" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #27ae60;" text="\$0.00" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <columnConstraints>
                        <ColumnConstraints percentWidth="55" />
                        <ColumnConstraints halignment="RIGHT" percentWidth="45" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>

                <HBox alignment="CENTER_LEFT" spacing="6" style="-fx-padding: 6 0 0 0;">
                    <Label style="-fx-font-size: 14px; -fx-text-fill: #27ae60;" text="âœ“" />
                    <Label style="-fx-font-size: 10px; -fx-text-fill: #155724; -fx-font-style: italic;" text="Reembolso segÃºn polÃ­ticas de la empresa" wrapText="true" />
                </HBox>
            </VBox>

            <Separator styleClass="entrega-separator" style="-fx-background-color: #e1e8ed;" />

            <!-- Motivo de Entrega Anticipada -->
            <VBox spacing="10" styleClass="motivo-section" style="-fx-padding: 12; -fx-background-color: #fff3cd; -fx-background-radius: 5;">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label styleClass="icon-decoration" style="-fx-font-size: 14px;" text="ðŸ“" />
                    <Label styleClass="motivo-label" style="-fx-font-size: 12px; -fx-font-weight: bold;" text="Motivo de la Entrega Anticipada *" />
                </HBox>

                <TextArea fx:id="txtMotivo" prefRowCount="3" maxHeight="100" promptText="Explique el motivo de la entrega anticipada..." styleClass="motivo-textarea" style="-fx-font-size: 11px;" wrapText="true" />

                <Label fx:id="lblErrorMotivo" styleClass="error-label" style="-fx-font-size: 10px; -fx-text-fill: #d32f2f; -fx-font-weight: bold;" text="" visible="false" />

                <HBox alignment="CENTER_LEFT" spacing="6" styleClass="alert-box" style="-fx-padding: 8; -fx-background-color: rgba(255, 193, 7, 0.2); -fx-background-radius: 3;">
                    <Label styleClass="alert-icon" style="-fx-font-size: 12px;" text="ðŸ’¡" />
                    <Label styleClass="alert-text" style="-fx-font-size: 10px; -fx-text-fill: #856404;" text="Detalle el motivo para procesar su solicitud" wrapText="true" />
                </HBox>
            </VBox>

            <!-- Nota importante - Compacta -->
            <VBox spacing="6" styleClass="nota-box" style="-fx-padding: 10; -fx-background-color: #e3f2fd; -fx-background-radius: 5;">
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label style="-fx-font-size: 14px;" text="â„¹ï¸" />
                    <Label style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-text-fill: #1565c0;" text="InformaciÃ³n Importante" />
                </HBox>
                <Label styleClass="nota-text" style="-fx-font-size: 10px; -fx-text-fill: #0d47a1;" text="â€¢ VehÃ­culo debe estar en las mismas condiciones" wrapText="true" />
                <Label styleClass="nota-text" style="-fx-font-size: 10px; -fx-text-fill: #0d47a1;" text="â€¢ Reembolso en 5-7 dÃ­as hÃ¡biles" wrapText="true" />
                <Label styleClass="nota-text" style="-fx-font-size: 10px; -fx-text-fill: #0d47a1;" text="â€¢ Se aplican polÃ­ticas de cancelaciÃ³n del contrato" wrapText="true" />
            </VBox>

        </VBox>
    </ScrollPane>

    <!-- Footer fijo con botones -->
    <VBox spacing="0" styleClass="entrega-footer" style="-fx-background-color: white;">

        <Separator style="-fx-background-color: #e1e8ed;" />

        <!-- Botones de AcciÃ³n - Compactos -->
        <HBox alignment="CENTER" spacing="12" style="-fx-padding: 15 20;">
            <Region HBox.hgrow="ALWAYS" />

            <Button fx:id="btnCancelar" onAction="#handleCancelar" prefHeight="40" prefWidth="140" styleClass="btn-cancelar-entrega" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13px; -fx-cursor: hand; -fx-background-radius: 5;" text="Cancelar" />

            <Button fx:id="btnConfirmar" onAction="#handleConfirmar" prefHeight="40" prefWidth="180" styleClass="btn-confirmar-entrega" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13px; -fx-cursor: hand; -fx-background-radius: 5;" text="Confirmar Entrega" />
        </HBox>
    </VBox>

</VBox>